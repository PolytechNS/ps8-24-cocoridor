<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./WaitForGame.css">
    <title>GamePage</title>
</head>
<body>
    <h1>En attente d'un joueur</h1>

    <img src="polos.gif" alt="Loading">
    <button id="btnStart" >test</button>

    <a href="../index.html"><button >Annuler</button></a>

    <button id="btnChat" >message</button>
    <div id="messageButtons" style="display: none;">
        <button onclick="sendMessage('Bonjour')">Bonjour</button>
        <button onclick="sendMessage('Bonne chance!')">Bonne chance!</button>
        <button onclick="sendMessage('Bien joué!')">Bien joué!</button>
    </div>
</br>
    <div id="messageBox"></div>


    <script src="../js/socket.io.js"> </script>
    <script>
        console.log("test");
        let clientRoom;
        socket=io('/api/1vs1');
        socket.on('getRoom',(data)=>{
            clientRoom=data
            console.log("client :"+clientRoom)

        });

        document.getElementById("btnStart").addEventListener('click',()=>{
            console.log("click")
            socket.emit('go');
            console.log("client :"+clientRoom);
        });
    
                socket.on('start',function(){
                    console.log("start");
            console.log(document.body.style.background)
            if(document.body.style.background=='brown'){
                document.body.style.background='white';
            }else{
                document.body.style.background='brown';
            }
        })

        socket.on('test',function(){
            console.log("teee");
        })


        document.getElementById("btnChat").addEventListener('click', function() {
            var messageButtons = document.getElementById("messageButtons");
            messageButtons.style.display = 'block'; // Affiche les boutons de messages
        });

        function sendMessage(message) {
            console.log("Message envoyé: " + message);
            socket.emit('sendMessage', message); // Envoyez le message à l'adversaire via socket.io
        }

        socket.on('receiveMessage', function(message) {
            console.log("Message reçu: " + message);
            let messageBox = document.getElementById("messageBox");
            let messageElement = document.createElement("p");
            messageElement.textContent = message;
            messageBox.appendChild(messageElement);
        });
    </script>

</body>
</html>